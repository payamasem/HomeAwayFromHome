<!DOCTYPE html>
<html lang="en">
<head>
  <title>Neighborhood: Northside Berkeley</title>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="assets/css/style.css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-default">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand" href="index.html">HOME AWAY FROM HOME</a>
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>                        
      </button>
    </div>

    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="index.html">HOME</a></li>
        <li><a href="about.html">ABOUT</a></li>
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#">NEIGHBORHOODS<span class="caret"></span></a>
           <ul class="dropdown-menu">
             <li><a href="piedmont.html">PIEDMONT</a></li>
             <li><a href="westOakland.html">WEST OAKLAND</a></li>
             <li><a href="northside.html">NORTHSIDE BERKELEY</a></li>
             <li><a href="southside.html">SOUTHSIDE BERKELEY</a></li>
             <li><a href="albany.html">ALBANY</a></li>
           </ul>
        </li>
       <li><a href="contact.html">FEEDBACK</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- Second Container -->
<div class=" container-fluid bg-2 ">
	<div class="container">
    <h3 class="margin">Northside Berkeley</h3>
    <br>
    <br>
    <div id="content"></div>
  </div>
</div>

<!-- Third Container --> 
<div class="container-fluid bg-3 text-center">    
  <h3 class="margin">More about Northside</h3>
  <br>
	   <div class="col-md-6">
      <div class="row">
        <div id="walkscore"></div>
      </div>
      <br>
      <br>
      <div class="row"> 
        <!-- Zillow widget code -->
        <div id="zillow-large-search-box-widget-container" style="width:432px;overflow:hidden;background-color:#e7f1fd;color:#555; font: normal normal normal 13px verdana,arial,sans-serif;line-height:13px;margin:0 auto;padding:0;text-align:center;border:1px solid #adcfff;letter-spacing:0;text-transform:none;"><h2 style="color:#d61;text-align:left;font-size:20px;line-height:20px;font-weight:normal;float:left;width:200px;margin-left:10px;margin-top:5px;letter-spacing:0;text-transform:none;">Find Homes</h2><div style="float:right;"><a href="https://www.zillow.com/" target="_blank" rel="nofollow"><img alt="Zillow Real Estate Information" style="border:0;" src="https://www.zillow.com/widgets/GetVersionedResource.htm?path=%2Fstatic%2Fimages%2Fpowered-by-zillow.gif"></img></a></div><iframe scrolling="no" src="https://www.zillow.com/widgets/search/LargeSearchBoxWidget.htm?did=zillow-large-search-box-iframe-widget&type=iframe&rgname=Berkeley+CA&shvi=yes" width="430" frameborder="0" height="400"></iframe><table id="zillow-tnc-widget-footer-links" width="100%" style="font: normal normal normal 10px verdana,arial,sans-serif;text-align:left;line-height:12px;margin:10px 5px;padding:0;border-spacing:0;border-collapse:collapse;"><tbody style="margin:0;padding:0;"><tr style="margin:0;padding:0;"><td style="font-weight:bold;font-size:10px;color:#555;text-align:left;margin:0;padding:0;">QUICK LINKS:</td></tr><tr style="margin:0;padding:0;"><td style="margin:0;padding:0;"><span id="widgetFooterLink" class="regionBasedLink"><a href="https://www.zillow.com/oakland-ca/" target="_blank" rel="nofollow" style="color:#36b;font-family:verdana,arial,sans-serif;font-size:10px;margin:0 5px 0 0;padding:0;text-decoration:none;"><span class="region">Berkeley</span> Real Estate Listing</a></span></td><td style="margin:0;padding:0;"><span id="widgetFooterLink"><a href="https://www.zillow.com/mortgage-rates/" target="_blank" rel="nofollow" style="color:#36b;font-family:verdana,arial,sans-serif;font-size:10px;margin:0 5px 0 0;padding:0;text-decoration:none;">Mortgage Rates</a></span></td><td style="margin:0;padding:0;"><span id="widgetFooterLink"><a href="https://www.zillow.com/refinance/" target="_blank" rel="nofollow" style="color:#36b;font-family:verdana,arial,sans-serif;font-size:10px;margin:0 5px 0 0;padding:0;text-decoration:none;">Refinancing</a></span></td></tr><tr style="margin:0;padding:0;"><td style="margin:0;padding:0;"><span id="widgetFooterLink" class="regionBasedLink"><a href="https://www.zillow.com/oakland-ca/foreclosures/" target="_blank" rel="nofollow" style="color:#36b;font-size:10px;margin:0 5px 0 0;padding:0;text-decoration:none;"><span class="region">Berkeley</span> Foreclosures</a></span></td><td style="margin:0;padding:0;"><span id="widgetFooterLink"><a href="https://www.zillow.com/mortgage-calculator/" target="_blank" rel="nofollow" style="color:#36b;font-size:10px;margin:0 5px 0 0;padding:0;text-decoration:none;">Mortgage Calculators</a></span></td><td style="margin:0;padding:0;"><span id="widgetFooterLink"><a href="https://www.zillow.com/mortgage-rates/" target="_blank" rel="nofollow" style="color:#36b;font-size:10px;margin:0 5px 0 0;padding:0;text-decoration:none;">Purchase Loans</a></span></td></tr></tbody></table></div>
      </div>
    </div>
	 <div class="col-md-6" >
    <!-- Neighbourhood map will appear here -->
    <div id="map"></div>
  </div>
</div>

<!-- Footer -->
<footer class="container-fluid bg-4 text-center">
   <p>Â© 2018 Home Away From Home. All Rights Reserved</p> 
</footer>

<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyDKl8oQv7IpcgO_Qgj2ZtjXnlpN9VRpuig"></script>
<script type="text/javascript" src="assets/javascript/northside.js"></script>
<script>

    

var map;
var infowindow;

var request;
var service;
var markers = [];

function initialize(){
  //center is necessary to center map somewhere (in div?)
  var center = new google.maps.LatLng(37.8751,-122.26018); //lat and long of google coordinates
  map = new google.maps.Map(document.getElementById('map'), {
    center: center,
    zoom: 14
  }); //zoom if you put 1, you look at whole globe

  //8047m / 5mile radius around center of map for coffee shops
  request = {
    location: center,
    radius: 8000,
    keyword: 'wine'
  };

  infowindow = new google.maps.InfoWindow();

  service = new google.maps.places.PlacesService(map);

  service.nearbySearch(request,callback);

  
  var request2 = {
    location: center,
    radius: 8000,
    keyword: 'japanese'
  };

  infowindow = new google.maps.InfoWindow();

  var service2 = new google.maps.places.PlacesService(map);

  service2.nearbySearch(request2,callback);



  var request3 = {
    location: center,
    radius: 8000,
    keyword: 'coffee'
  };

  infowindow = new google.maps.InfoWindow();

  var service3 = new google.maps.places.PlacesService(map);

  service3.nearbySearch(request3,callback);


var request4 = {
    location: center,
    radius: 8000,
    keyword: 'korean'
  };

  infowindow = new google.maps.InfoWindow();

  var service4 = new google.maps.places.PlacesService(map);

  service4.nearbySearch(request3,callback);


var request5 = {
    location: center,
    radius: 8000,
    types: ['store']
  };

  infowindow = new google.maps.InfoWindow();

  var service5 = new google.maps.places.PlacesService(map);

  service5.nearbySearch(request3,callback);



  var request6 = {
    location: center,
    radius: 8000,
    types: ['gas_station']
  };

  infowindow = new google.maps.InfoWindow();

  var service6 = new google.maps.places.PlacesService(map);

  service6.nearbySearch(request6,callback);



  //this allows map to update and recall service.nearbySearch, if user right clicks and moves pointer to another location
   google.maps.event.addListener(map, 'rightclick', function(event){
    map.setCenter(event.latLng);
    clearResults(markers);

    var request = {
      location: event.latLng,
      radius: 8047,
      types: ['cafe']
    };
    service.nearbySearch(request, callback);
  });

}

//ensures we get back good results and that no error connecting to server
//gets all the results into array, and gives them a marker
function callback(results, status){
  if(status == google.maps.places.PlacesServiceStatus.OK){
    for(var i = 0; i < results.length; i++){
      markers.push(createMarker(results[i]));
    }
  }
}

function createMarker(place){
  var placeLoc = place.geometry.location;
  var marker = new google.maps.Marker({
    map: map,
    position: place.geometry.location
  });

  google.maps.event.addListener(marker, 'click', function(){
    infowindow.setContent(place.name);
    infowindow.open(map, this);
  });

  return marker;
}

//Added in part 4. this isn't working for me
function clearResults(markers){
  for (var m in markers){
    markers[m].setMap(null);
  }
  markers = [];
}

//on status load, will call function "initialize", and target that to browser window
google.maps.event.addDomListener(window, 'load', initialize);

var queryURL1 = "https://en.wikipedia.org/w/api.php?format=json&action=query&prop=extracts&exintro=&explaintext=&titles=Northside,_Berkeley,_California"
  
  var proxy = 'https://cors-anywhere.herokuapp.com/';
  
  $.ajax({
        url: proxy + queryURL1,
        method: 'GET' 
      }).done(function(response){
  

          console.log(response);
          console.log(response.query.pages[3234055].extract);
          $("#content").html("<p>"+ response.query.pages[3234055
].extract + "</p>")
      });

var queryURL2 = "http://api.walkscore.com/score?format=json&address=1862+Euclid+Ave+Berkeley+CA+94709&lat=37.8751&lon= -122.26018&wsapikey=24c9469a038f55c85cbbba8abeadcfcb";
  

    var proxy = 'https://cors-anywhere.herokuapp.com/';
    $.ajax({
      url: proxy + queryURL2,
      method: 'GET'
    }).done(function(response) {
      console.log(response);
      console.log(response.walkscore);
      console.log(response.logo_url);
      $("#walkscore").html("<h3>" +response.description+ "</h3>");
      $("#walkscore").append("<img src = '" + response.logo_url + "'>");
      $("#walkscore").append("<p>Walkscore around the area : " + response.walkscore + "</p>");

    });


    

  </script>

</body>
</html>